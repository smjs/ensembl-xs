dist: focal

language: perl

perl:
  - '5.26'
  - '5.32'

sudo: false

env: 
  - COVERALLS=false ENSDIR=$TRAVIS_BUILD_DIR/..

before_install:
  - export CWD=$PWD
  - cd $ENSDIR
  - git clone --branch main --depth 1 https://github.com/Ensembl/ensembl.git
  - git clone --branch main --depth 1 https://github.com/Ensembl/ensembl-test.git
  - cd $CWD

install:
  - cpanm -v --sudo --installdeps --notest .
  - perl Makefile.PL
  - make

script: "./travisci/harness.sh"

notifications:
  email:
    on_success: always
    on_failure: always
  slack:
    rooms:
      secure: crm5oSCbIpT3dQspOEhH8rUW33HGFPwRcU0VgHRFybDt09QUxnHzNNIB6b478iaignyuEZ9UOfRT5NDbb2y7AKdU4Tm4LTV6lpPPME1o+7F/hB6WT7QnajMzeVS4iWrKdlBWVyEvbHITIgUgZqfnOis1b6WWee8nETxbkAptCbE=
    on_failure: change
